<h2 class="post-title">Projects</h2>

<div class="post-content">
    <br>
    
    {% capture last_location %}''{% endcapture %}

    {% assign sorted_pubs = site.projects | sort: 'date' %}

    {% for pub in sorted_pubs reversed %}

    {% capture this_location %}{{ pub.location }}{% endcapture %}

    {% if last_location == 'Apple' and this_location != last_location %}
    <h3>During PhD</h3>
    {% endif %}

    {% if this_location == 'Harvey Mudd College' and this_location != last_location %}
    <h3>Undergraduate</h3>
    {% endif %}
    {% capture last_location %}{{ this_location }}{% endcapture %}


    <div class="row publication-badge">
      <div class="publication-pic col-md-2 col-sm-3 col-xs-12 text-left">
        {% if pub.image.size > 0 %}<a href="{{ pub.url }}#project"><img src="{{ pub.thumbnail }}"/></a>{% endif %}&nbsp;
      </div>
      <div class="publication-info col-md-10 col-sm-9 col-xs-12">
        <a href="{{ pub.url }}#project"><h4>{{ pub.title }}</h4></a>

        <p> 

          {% if pub.paper %} 
            <a href="{{ pub.paper }}" class="btn btn-default btn-xs" aria-label="Download PDF">
            <span class="glyphicon glyphicon-file" aria-hidden="true"></span> Publication
            </a> 
          {% endif %}

          {% if pub.techreport %} 
            <a href="{{ pub.techreport }}" class="btn btn-default btn-xs" aria-label="Download PDF">
            <span class="glyphicon glyphicon-file" aria-hidden="true"></span> Tech Report
            </a> 
          {% endif %}

          {% if page.supplement %} 
            <a href="{{ page.supplement }}" class="btn btn-default btn-xs" aria-label="Download PDF">
            <span class="glyphicon glyphicon-file" aria-hidden="true"></span> Supplemental Material
            </a> 
          {% endif %}
            
          {% if pub.patent %}
            <a href="{{ pub.patent }}" class="btn btn-default btn-xs" aria-label="Link to Patent">
            <span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span> 
                Patent {% if pub.patent2 %} #1 {% endif %}
            </a> 
          {% endif %}
            
          {% if pub.patent2 %}
            <a href="{{ pub.patent2 }}" class="btn btn-default btn-xs" aria-label="Link to Patent">
            <span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span> Patent #2
            </a> 
          {% endif %}

          {% if pub.posterabstract %} 
            <a href="{{ pub.posterabstract }}" class="btn btn-default btn-xs" aria-label="Download PDF">
            <span class="glyphicon glyphicon-file" aria-hidden="true"></span> Poster Abstract
            </a> 
          {% endif %}

          {% if pub.poster %} 
            <a href="{{ pub.poster }}" class="btn btn-default btn-xs" aria-label="Download PDF">
            <span class="glyphicon glyphicon-picture" aria-hidden="true"></span> Poster
            </a> 
          {% endif %}

          {% if pub.talkslides %} 
            <a href="{{ pub.talkslides }}" class="btn btn-default btn-xs" aria-label="Download PDF">
            <span class="glyphicon glyphicon-blackboard" aria-hidden="true"></span> Talk Slides
            </a> 
          {% endif %}

          {% if pub.video.size > 0 %}
            <a href="{{ pub.video }}" class="btn btn-default btn-xs" aria-label="Video" target="_blank">
            <span class="glyphicon glyphicon-facetime-video" aria-hidden="true"></span> Video
            </a> 
          {% endif %}

          {% if pub.citation %}
            <button type="button" class="btn btn-default btn-xs" aria-label="Citation" data-toggle="modal" data-target="#{{pub.title | slugify}}_citation">
            <span class="glyphicon glyphicon-book" aria-hidden="true"></span> Citation
            </button>
          {% endif %}

          {% if pub.bibtex %}
            <button type="button" class="btn btn-default btn-xs" aria-label="BibTeX" data-toggle="modal" data-target="#{{pub.title | slugify}}_bibtex">
            <span class="glyphicon glyphicon-book" aria-hidden="true"></span> BibTeX
            </button>
          {% endif %}

          <br/>
          <span class="authors">{% include author_list.html authors=pub.authors %}</span>
          <br/>
          {{ pub.blurb }}
        </p>
      </div>


    </div>

    <div class="modal fade" tabindex="-1" role="dialog" id="{{pub.title | slugify}}_bibtex">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">{{ pub.title }}</h4>
          </div>
          <div class="modal-body">
            <code><pre>{{ pub.bibtex }}</pre></code>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <div class="modal fade" tabindex="-1" role="dialog" id="{{pub.title | slugify}}_citation">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">{{ pub.title }}</h4>
          </div>
          <div class="modal-body">
            <code>{{ pub.citation }}</code>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    {% endfor %}
    
</div>
